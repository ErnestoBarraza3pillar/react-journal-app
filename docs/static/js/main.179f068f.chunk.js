(this['webpackJsonpjournal-app'] = this['webpackJsonpjournal-app'] || []).push([[0], { 178: function (e, t, a) {}, 179: function (e, t, a) { 'use strict'; a.r(t); const n = a(4); const r = a.n(n); const c = a(41); const o = a.n(c); const u = a(14); const l = a(39); const i = a(72); const s = '[Auth] Login'; const m = '[Auth] Logout'; const p = '[UI] Set Error'; const d = '[UI] Remove Error'; const f = '[UI] Start loading'; const b = '[UI] Finish loading'; const h = '[Notes] New Note'; const j = '[Notes] Set Active Note'; const v = '[Notes] Load Note'; const E = '[Notes] Updated Note'; const g = '[Notes] Delete Note'; const O = '[Notes] LogOut Cleaning Note'; const _ = a(19); const y = a(11); const N = { notes: [], active: null }; const w = { loading: !1, msgError: null }; const x = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || l.c; const k = Object(l.b)({ auth: function () { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) { case s:return { uid: t.payload.uid, name: t.payload.displayName }; case m:return {}; default:return e } }, ui: function () { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : w; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) { case p:return Object(y.a)(Object(y.a)({}, e), {}, { msgError: t.payload }); case d:return Object(y.a)(Object(y.a)({}, e), {}, { msgError: null }); case f:return Object(y.a)(Object(y.a)({}, e), {}, { loading: !0 }); case b:return Object(y.a)(Object(y.a)({}, e), {}, { loading: !1 }); default:return e } }, notes: function () { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : N; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) { case j:return Object(y.a)(Object(y.a)({}, e), {}, { active: Object(y.a)({}, t.payload) }); case h:return Object(y.a)(Object(y.a)({}, e), {}, { notes: [t.payload].concat(Object(_.a)(e.notes)) }); case v:return Object(y.a)(Object(y.a)({}, e), {}, { notes: Object(_.a)(t.payload) }); case E:return Object(y.a)(Object(y.a)({}, e), {}, { notes: e.notes.map(function (e) { return e.id === t.payload.id ? t.payload.note : e }) }); case g:return Object(y.a)(Object(y.a)({}, e), {}, { active: null, notes: e.notes.filter(function (e) { return e.id !== t.payload }) }); case O:return Object(y.a)(Object(y.a)({}, e), {}, { active: null, notes: [] }); default:return e } } }); const C = Object(l.d)(k, x(Object(l.a)(i.a))); const S = a(12); const I = a(30); const A = a(17); const L = a(0); const D = a.n(L); const U = a(1); const P = a(25); const R = a(28); const B = a(73); const F = (Object(B.a)({ apiKey: 'AIzaSyDq3U8aace3K5SlA0PnoKBNnrSjdGOGo6s', authDomain: 'react-app-60437.firebaseapp.com', projectId: 'react-app-60437', storageBucket: 'react-app-60437.appspot.com', messagingSenderId: '739636722212', appId: '1:739636722212:web:1065c4b622c0061cac76b1' }), Object(P.f)()); const G = new R.a(); const T = function (e) { return { type: p, payload: e } }; const q = function () { return { type: b } }; const z = a(31); const K = a.n(z); const J = (function () { const e = Object(U.a)(D.a.mark(function e (t) { let a, n; return D.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return e.next = 2, Object(P.e)(Object(P.b)(F, ''.concat(t, '/journal/notes'))); case 2:return a = e.sent, n = [], a.forEach(function (e) { n.push(Object(y.a)({ id: e.id }, e.data())) }), e.abrupt('return', n); case 6:case 'end':return e.stop() } }, e) })); return function (t) { return e.apply(this, arguments) } }()); const W = (function () { const e = Object(U.a)(D.a.mark(function e (t) { let a, n, r; return D.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return 'https://api.cloudinary.com/v1_1/dorarfmvg/upload', (a = new FormData()).append('upload_preset', 'react-journal'), a.append('file', t), e.prev = 4, e.next = 7, fetch('https://api.cloudinary.com/v1_1/dorarfmvg/upload', { method: 'POST', body: a }); case 7:if (!(n = e.sent).ok) { e.next = 15; break } return e.next = 11, n.json(); case 11:return r = e.sent, e.abrupt('return', r.secure_url); case 15:return e.next = 17, n.json(); case 17:throw e.sent; case 18:e.next = 23; break; case 20:throw e.prev = 20, e.t0 = e.catch(4), e.t0; case 23:case 'end':return e.stop() } }, e, null, [[4, 20]]) })); return function (t) { return e.apply(this, arguments) } }()); const X = function (e, t) { return { type: h, payload: Object(y.a)({ id: e }, t) } }; const M = function (e, t) { return { type: j, payload: Object(y.a)({ id: e }, t) } }; const V = function (e) { return { type: v, payload: e } }; const H = function (e) { return (function () { const t = Object(U.a)(D.a.mark(function t (a, n) { let r, c, o; return D.a.wrap(function (t) { for (;;) switch (t.prev = t.next) { case 0:return r = n().auth.uid, e.url || delete e.url, delete (c = Object(y.a)({}, e)).id, o = Object(P.d)(F, ''.concat(r, '/journal/notes'), ''.concat(e.id)), t.next = 7, Object(P.g)(o, c); case 7:a(Q(e.id, c)), K.a.fire('Saved', e.title, 'success'); case 9:case 'end':return t.stop() } }, t) })); return function (e, a) { return t.apply(this, arguments) } }()) }; var Q = function (e, t) { return { type: E, payload: { id: e, note: Object(y.a)({ id: e }, t) } } }; const Y = function (e) { return { type: g, payload: e } }; const Z = Object(R.c)(); const $ = function (e, t) { return function (a) { a({ type: f }), Object(R.d)(Z, e, t).then(function (e) { const t = e.user; a(ee(t.uid, t.displayName)), a(q()) }).catch(function (e) { a(q()), K.a.fire('Error', e.message, 'error') }) } }; var ee = function (e, t) { return { type: s, payload: { uid: e, displayName: t } } }; const te = function () { return { type: m } }; const ae = a(5); const ne = function () { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const t = Object(n.useState)(e); const a = Object(S.a)(t, 2); const r = a[0]; const c = a[1]; const o = function () { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : e; c(t) }; const u = function (e) { const t = e.target; c(Object(y.a)(Object(y.a)({}, r), {}, Object(ae.a)({}, t.name, t.value))) }; return [r, u, o] }; const re = function () { const e = Object(u.b)(); const t = Object(u.c)(function (e) { return e.ui }).loading; const a = ne({ email: 'test@gmail.com', password: '123456' }); const n = Object(S.a)(a, 2); const c = n[0]; const o = n[1]; const l = c.email; const i = c.password; return r.a.createElement(r.a.Fragment, null, r.a.createElement('h3', { className: 'auth__title' }, 'Login'), r.a.createElement('form', { onSubmit: function (t) { t.preventDefault(), console.log(l, i), e($(l, i)) }, class: 'animate__animated animate__fadeIn animate__faster' }, r.a.createElement('input', { type: 'text', placeholder: 'Email', name: 'email', className: 'auth__input', autoComplete: 'off', value: l, onChange: o }), r.a.createElement('input', { type: 'password', placeholder: 'Password', name: 'password', className: 'auth__input', value: i, onChange: o }), r.a.createElement('button', { type: 'submit', className: 'btn btn-primary btn-block', disable: t ? 1 : 0 }, 'Login'), r.a.createElement('div', { className: 'auth__social-networks' }, r.a.createElement('p', null, 'Login with social networks'), r.a.createElement('div', { className: 'google-btn', onClick: function () { e(function (e) { Object(R.e)(Z, G).then(function (t) { const a = t.user; e(ee(a.uid, a.displayName)) }).catch(function (e) { console.log(e.message) }) }) } }, r.a.createElement('div', { className: 'google-icon-wrapper' }, r.a.createElement('img', { className: 'google-icon', src: 'https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg', alt: 'google button' })), r.a.createElement('p', { className: 'btn-text' }, r.a.createElement('b', null, 'Sign in with google')))), r.a.createElement(I.b, { to: '/auth/register', className: 'link' }, 'Create new account'))) }; const ce = a(75); const oe = a.n(ce); const ue = function () { const e = Object(u.b)(); const t = Object(u.c)(function (e) { return e.ui }).msgError; const a = ne({ username: 'Ernesto', email: 'ernestobarraza2014@gmail.com', password: '123456', password2: '123456' }); const n = Object(S.a)(a, 2); const c = n[0]; const o = n[1]; const l = c.username; const i = c.email; const s = c.password; const m = c.password2; const p = function () { return l.trim().length === 0 ? (e(T('Name is Required')), !1) : oe.a.isEmail(i) ? s !== m || s.length < 5 ? (e(T('Password is not valid')), !1) : (e({ type: d }), !0) : (e(T('Email is not valid')), !1) }; return r.a.createElement(r.a.Fragment, null, r.a.createElement('h3', { className: 'auth__title' }, 'Register'), r.a.createElement('form', { onSubmit: function (t) { t.preventDefault(), p() && e(function (e, t, a) { return function (n) { Object(R.b)(Z, e, t).then(function () { const e = Object(U.a)(D.a.mark(function e (t) { let r; return D.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return r = t.user, e.next = 3, Object(R.g)(Z.currentUser, { displayName: a }).then(function () {}).catch(function (e) { K.a.fire('Error', e.message, 'error') }); case 3:n(ee(r.uid, r.displayName)); case 4:case 'end':return e.stop() } }, e) })); return function (t) { return e.apply(this, arguments) } }()).catch(function (e) { K.a.fire('Error', e.message, 'error') }) } }(i, s, l)), console.log(l, i, s, m) }, class: 'animate__animated animate__fadeIn animate__faster' }, t && r.a.createElement('div', { className: 'auth__alert-error' }, t), r.a.createElement('input', { type: 'text', placeholder: 'Name', name: 'username', className: 'auth__input', autoComplete: 'off', value: l, onChange: o }), r.a.createElement('input', { type: 'text', placeholder: 'Email', name: 'email', className: 'auth__input', autoComplete: 'off', value: i, onChange: o }), r.a.createElement('input', { type: 'password', placeholder: 'Password', name: 'password', className: 'auth__input', value: s, onChange: o }), r.a.createElement('input', { type: 'password', placeholder: 'Confirm password', name: 'password2', className: 'auth__input', value: m, onChange: o }), r.a.createElement('button', { type: 'submit', className: 'btn btn-primary btn-block mb-5' }, 'Register'), r.a.createElement(I.b, { to: '/auth/login', className: 'link' }, 'Already registered?'))) }; const le = function () { return r.a.createElement('div', { className: 'auth__main' }, r.a.createElement('div', { className: 'auth__box-container' }, r.a.createElement(A.d, null, r.a.createElement(A.b, { exact: !0, path: '/auth/login', component: re }), r.a.createElement(A.b, { exact: !0, path: '/auth/register', component: ue }), r.a.createElement(A.a, { to: '/auth/login' })))) }; const ie = a(76); const se = a.n(ie); const me = function (e) { const t = e.id; const a = e.date; const n = e.title; const c = e.body; const o = e.url; const l = se()(a); const i = Object(u.b)(); return r.a.createElement('div', { className: 'journal__entry pointer animate__animated animate__fadeIn animate__faster', onClick: function () { i(M(t, { date: a, title: n, body: c, url: o })) } }, o && r.a.createElement('div', { className: 'journal__entry-picture', style: { backgroundSize: 'cover', backgroundImage: 'url('.concat(o, ')') } }), r.a.createElement('div', { className: 'journal__entry-body' }, r.a.createElement('p', { className: 'journal__entry-title' }, n), r.a.createElement('p', { className: 'journal__entry-content' }, c)), r.a.createElement('div', { className: 'journal__entry-date-box' }, r.a.createElement('span', null, l.format('dddd')), r.a.createElement('h4', null, l.format('Do')))) }; const pe = function () { const e = Object(u.c)(function (e) { return e.notes }).notes; return r.a.createElement('div', { className: 'journal__entries' }, e.map(function (e) { return r.a.createElement(me, Object.assign({ key: e.id }, e)) })) }; const de = function () { const e = Object(u.c)(function (e) { return e.auth }).name; const t = Object(u.b)(); return r.a.createElement('aside', { className: 'journal__sidebar' }, r.a.createElement('div', { className: 'journal__sidebar-navbar' }, r.a.createElement('h3', { className: 'mt-5' }, r.a.createElement('i', { className: 'far fa-moon' }), r.a.createElement('span', null, ' ', e, ' ')), r.a.createElement('button', { className: 'btn', onClick: function () { t(function () { const e = Object(U.a)(D.a.mark(function e (t) { return D.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return e.next = 2, Object(R.f)(Z); case 2:t(te()), t({ type: O }); case 4:case 'end':return e.stop() } }, e) })); return function (t) { return e.apply(this, arguments) } }()) } }, 'Logout')), r.a.createElement('div', { className: 'journal__new-entry', onClick: function () { t(function () { const e = Object(U.a)(D.a.mark(function e (t, a) { let n, r, c; return D.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return n = a().auth.uid, r = { title: '', body: '', date: (new Date()).getTime() }, e.next = 4, Object(P.a)(Object(P.b)(F, ''.concat(n, '/journal/notes')), r); case 4:c = e.sent, t(M(c.id, r)), t(X(c.id, r)); case 7:case 'end':return e.stop() } }, e) })); return function (t, a) { return e.apply(this, arguments) } }()) } }, r.a.createElement('i', { className: 'far fa-calendar-plus fa-5x' }), r.a.createElement('p', { className: 'mt-5' }, 'New entry')), r.a.createElement(pe, null)) }; const fe = function () { const e = Object(u.b)(); const t = Object(u.c)(function (e) { return e.notes }).active; return r.a.createElement('div', { className: 'notes__appbar' }, r.a.createElement('span', null, '30 de agosto 2021'), r.a.createElement('input', { id: 'fileSelector', type: 'file', name: 'file', style: { display: 'none' }, onChange: function (t) { const a = t.target.files[0]; a && e(function (e) { return (function () { const t = Object(U.a)(D.a.mark(function t (a, n) { let r, c; return D.a.wrap(function (t) { for (;;) switch (t.prev = t.next) { case 0:return r = n().notes.active, K.a.fire({ title: ' Uploading... ', text: 'Please Wait ', allowOutsideClick: !1, showConfirmButton: !1, willOpen: function () { K.a.showLoading() } }), t.next = 4, W(e); case 4:c = t.sent, r.url = c, a(H(r)), K.a.close(); case 8:case 'end':return t.stop() } }, t) })); return function (e, a) { return t.apply(this, arguments) } }()) }(a)) } }), r.a.createElement('div', null, r.a.createElement('button', { className: 'btn', onClick: function () { document.querySelector('#fileSelector').click() } }, 'Picture'), r.a.createElement('button', { className: 'btn', onClick: function () { e(H(t)) } }, 'Save'))) }; const be = function () { const e = Object(u.c)(function (e) { return e.notes }).active; const t = ne(e); const a = Object(S.a)(t, 3); const c = a[0]; const o = a[1]; const l = a[2]; const i = c.body; const s = c.title; const m = c.id; const p = Object(n.useRef)(e.id); const d = Object(u.b)(); Object(n.useEffect)(function () { e.id !== p.current && (l(e), p.current = e.id) }, [e, l]), Object(n.useEffect)(function () { d(M(c.id, Object(y.a)({}, c))) }, [c, d]); return r.a.createElement('div', { className: 'notes__main-content' }, r.a.createElement(fe, null), r.a.createElement('div', { className: 'notes__content' }, r.a.createElement('input', { type: 'text', placeholder: 'Some awesome title', className: 'notes__title-input', autoComplete: 'off', value: s, name: 'title', onChange: o }), r.a.createElement('textarea', { placeholder: 'What happened today', className: 'notes__textarea', value: i, name: 'body', onChange: o }), e.url && r.a.createElement('div', { className: 'notes__image' }, r.a.createElement('img', { src: e.url, alt: 'imagen' }))), r.a.createElement('button', { className: 'btn btn-danger', onClick: function () { d(function (e) { return (function () { const t = Object(U.a)(D.a.mark(function t (a, n) { let r; return D.a.wrap(function (t) { for (;;) switch (t.prev = t.next) { case 0:return r = n().auth.uid, t.prev = 1, t.next = 4, Object(P.c)(Object(P.d)(F, ''.concat(r, '/journal/notes'), ''.concat(e))); case 4:t.next = 9; break; case 6:t.prev = 6, t.t0 = t.catch(1), console.log(t.t0); case 9:a(Y(e)); case 10:case 'end':return t.stop() } }, t, null, [[1, 6]]) })); return function (e, a) { return t.apply(this, arguments) } }()) }(m)) } }, 'Delete')) }; const he = function () { return r.a.createElement('div', { className: 'nothing__main-content' }, r.a.createElement('p', null, 'Select something', r.a.createElement('br', null), 'Create an entry!'), r.a.createElement('i', { className: 'far fa-star fa-4x mt-5' })) }; const je = function () { const e = Object(u.c)(function (e) { return e.notes }).active; return r.a.createElement('div', { className: 'journal__main-content animate__animated animate__fadeIn animate__faster' }, r.a.createElement(de, null), r.a.createElement('main', null, e ? r.a.createElement(be, null) : r.a.createElement(he, null))) }; const ve = a(45); const Ee = ['isAuthenticated', 'component']; const ge = function (e) { const t = e.isAuthenticated; const a = e.component; const n = Object(ve.a)(e, Ee); return r.a.createElement(A.b, Object.assign({}, n, { component: function (e) { return t ? r.a.createElement(a, e) : r.a.createElement(A.a, { to: '/auth/login' }) } })) }; const Oe = ['isAuthenticated', 'component']; const _e = function (e) { const t = e.isAuthenticated; const a = e.component; const n = Object(ve.a)(e, Oe); return r.a.createElement(A.b, Object.assign({}, n, { component: function (e) { return t ? r.a.createElement(A.a, { to: '/' }) : r.a.createElement(a, e) } })) }; const ye = function () { const e = Object(u.b)(); const t = Object(n.useState)(!0); const a = Object(S.a)(t, 2); const c = a[0]; const o = a[1]; const l = Object(n.useState)(!1); const i = Object(S.a)(l, 2); const s = i[0]; const m = i[1]; return Object(n.useEffect)(function () { Object(R.c)().onAuthStateChanged(function (t) { let a; (t === null || void 0 === t ? void 0 : t.uid) ? (e(ee(t.uid, t.displayName)), m(!0), e((a = t.uid, (function () { const e = Object(U.a)(D.a.mark(function e (t) { let n; return D.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return e.next = 2, J(a); case 2:n = e.sent, t(V(n)); case 4:case 'end':return e.stop() } }, e) })); return function (t) { return e.apply(this, arguments) } }())))) : m(!1), o(!1) }) }, [e, o, m]), c ? r.a.createElement('h1', null, 'Loading...') : r.a.createElement(I.a, null, r.a.createElement('div', null, r.a.createElement(A.d, null, r.a.createElement(_e, { path: '/auth', isAuthenticated: s, component: le }), r.a.createElement(ge, { exact: !0, path: '/', isAuthenticated: s, component: je }), r.a.createElement(A.a, { to: '/auth/login' })))) }; const Ne = function () { return r.a.createElement(u.a, { store: C }, r.a.createElement(ye, null)) }; a(178); o.a.render(r.a.createElement(Ne, null), document.getElementById('root')) }, 78: function (e, t, a) { e.exports = a(179) } }, [[78, 1, 2]]])
// # sourceMappingURL=main.179f068f.chunk.js.map
